<div>
  <br />

  <form (ngSubmit)="submit()" #customerForm="ngForm" class="editForm" novalidate>
   
    <div class="form-group">
      <label>Prospection Date</label>

      <input type="date" 
             style="width:220px"
             class="form-control" 
             name="prospectionDate" 
             (change)="dateProspectionChanged($event.target.valueAsDate)"
             [ngModel]="customer.prospectionDate | date:'yyyy-MM-dd'" 
             #prospectionDate="ngModel" 
             title="Month/Day/Year"
             required 
      />

      <div *ngIf="prospectionDate.touched && prospectionDate.invalid" class="alert alert-danger">
          <div *ngIf="prospectionDate.errors.required">Prospection Date is required</div>
      </div>

    </div>
    
    <div class="form-group">
      <label>BDM Name</label>
      <input class="form-control" 
              [(ngModel)]="customer.bdmName"
              name="bdmName" 
              #bdmName="ngModel"
              disabled
      />
    </div>

    <div class="form-group">
      <label>Lead From</label>
      <select class="form-control" 
              [(ngModel)]="customer.leadFrom" 
              name="leadFrom" 
              #leadFrom="ngModel"
              required 
      >
            <option value="Direct-Passive lead">Direct-Passive lead</option>
            <option value="WU lead">WU lead</option>
            <option value="Current SA">Current SA</option>
            <option value="UFC staff">UFC staff</option>
            <option value="My prospection">My prospection</option>
            <option value="UFC Social Media">UFC Social Media</option>
            <option value="UFC Web Site">UFC Web Site</option>
            <option value="UFC service provider">UFC service provider</option>
            <option value="Other">Other</option>
      </select>  
      <div class="alert alert-danger" [hidden]="leadFrom.untouched || leadFrom.valid">BDM Name is required</div>
    </div>

    <div class="form-group">
      <label>Type of Businness</label>
      <select class="form-control" 
              [(ngModel)]="customer.businessType"
              name="businessType" 
              #businessType="ngModel"
              required 
      >
            <option value="Kiosk">Kiosk</option>
            <option value="Travel Agency">Travel Agency</option>
            <option value="Grocery">Grocery</option>
            <option value="Transportation Company">Transportation Company</option>
            <option value="Change Office">Change Office</option>
            <option value="Post Office">Post Office</option>
            <option value="Other">Other</option>
      </select>  
      <div class="alert alert-danger" [hidden]="businessType.untouched || businessType.valid">Type of Businness is required</div>
    </div>    

    <div class="form-group">
      <label>Registration</label>
      <input type="text" 
             class="form-control" 
             name="registration" 
             [(ngModel)]="customer.registration" 
             #registration="ngModel" 
      />
    </div>
    
    <div class="form-group">
      <label>Business Name</label>
      <input type="text" 
             class="form-control" 
             name="businessName" 
             [(ngModel)]="customer.businessName" 
             #businessName="ngModel" 
             required 
      />
      <div class="alert alert-danger" [hidden]="businessName.untouched || businessName.valid">Business Name is required</div>
    </div>

    <div class="form-group">
      <label>Location / Alias Name</label>
      <input type="text" 
             class="form-control" 
             name="locationName" 
             [(ngModel)]="customer.locationName" 
             #locationName="ngModel" 
             required 
      />
      <div class="alert alert-danger" [hidden]="locationName.untouched || locationName.valid">Location Name is required</div>
    </div>    

    <div class="form-group">
      <label>Address</label>
      <input type="text" 
             class="form-control" 
             name="address" 
             [(ngModel)]="customer.address" 
             #address="ngModel" 
             required 
      />
      <div class="alert alert-danger" [hidden]="address.untouched || address.valid">Address is required</div>
    </div>

    <div class="form-group">
      <label>Post Code - City (Canton)</label>
      <select class="form-control" 
              [(ngModel)]="customer.stateId" 
              name="state" 
              #state="ngModel" 
              title="Select Post Code, City"
              (change)="selectChangeHandler($event.target.value)"
              required 
      >
          <option *ngFor="let state of states" [ngValue]="state.id">{{state.zip}} - {{state.name}} ({{state.abbreviation}})</option>
      </select>
      <div class="alert alert-danger" [hidden]="state.untouched || state.valid">Postal Code is required</div>
    </div>


    <label>Contact Person Info :</label>
    <hr class="rounded">

    <div class="form-group">
      <label>First Name</label>
      <input type="text" 
             class="form-control" 
             name="firstName" 
             [(ngModel)]="customer.firstName" 
             #firstName="ngModel" 
             required 
      />
      <div class="alert alert-danger" [hidden]="firstName.untouched || firstName.valid">First Name is required</div>
    </div>

    <div class="form-group">
      <label>Last Name</label>
      <input type="text" 
             class="form-control" 
             name="lastName" 
             [(ngModel)]="customer.lastName" 
             #lastName="ngModel" 
             required 
      />
      <div class="alert alert-danger" [hidden]="lastName.untouched || lastName.valid">Last Name is required</div>
    </div>

    <div class="form-group">
      <label>Role / Function</label>
      <input type="text" 
             class="form-control" 
             name="role" 
             [(ngModel)]="customer.role" 
             #role="ngModel" 
             required 
      />
      <div class="alert alert-danger" [hidden]="role.untouched || role.valid">Role / Function is required.</div>
    </div>

    <div class="form-group">
      <label>Phone Number</label>
      <input type="text" 
             placeholder="41123456789" 
             class="form-control" 
             name="phone" [(ngModel)]="customer.phone" 
             #phone="ngModel" 
             pattern="^((\\+91-?)|0)?[0-9]{11}$" 
             required 
      />
      <div *ngIf="phone.touched && phone.invalid" class="alert alert-danger">
          <div *ngIf="phone.errors.required">Phone Number is required</div>
          <div *ngIf="phone.errors.pattern">Please, Enter 11 digit Phone Number</div>
      </div>
    </div>

    <div class="form-group">
      <label>Email</label>
      <input type="email" 
             class="form-control" 
             name="email" 
             [(ngModel)]="customer.email" 
             #email="ngModel" pattern="^[^\s@]+@[^\s@]+\.[^\s@]{2,}$" 
             required 
      />
      <div class="alert alert-danger" [hidden]="email.untouched || email.valid">Email is required and must be valid</div>
    </div>

    <hr class="rounded">

    <div class="form-group">
      <label>Note 1</label>
      <textarea type="textarea" 
                class="form-control" 
                name="note1" 
                [(ngModel)]="customer.note1" 
                #note1="ngModel"></textarea>
    </div>

    <div class="form-group">
      <label>Note 2</label>
      <textarea class="form-control" 
                name="note2" 
                [(ngModel)]="customer.note2" 
                #note2="ngModel"></textarea>
    </div>    

        <div class="form-group">

      <label>Pending / Archived</label>
      
      <div class="radio">
        <label>
          <input type="radio" 
                 name="pending" 
                 [(ngModel)]="customer.pending" 
                 #pending="ngModel" 
                 value="Pending"
                 (change)="radioPendingChanged('Pending')" 
                 required 
          />
          Pending
        </label>
      </div>
     
      <div class="radio">
        <label>
          <input type="radio" 
                 name="pending" 
                 [(ngModel)]="customer.pending" 
                 #pending="ngModel" 
                 value="Archived" 
                 (change)="radioAchievedChanged('Archived')"
                 required 
          /> 
          Archived
        </label>
      </div>

    </div>

    <div [hidden]="prospectionStatus!='Archived'">

      <label>Archive Reason</label>
      <select class="form-control" 
              [(ngModel)]="customer.archivedReason"
              name="archivedReason" 
              id="archivedReason"
              style="width:260px;"
      >
            <option value="Contract Signed">Contract Signed</option>
            <option value="Solvability (UFC)">Solvability (UFC)</option>
            <option value="Criminal Records (UFC)">Criminal Records (UFC)</option>
            <option value="Type of business (UFC)">Type of business (UFC)</option>
            <option value="No registration (UFC)">No registration (UFC)</option>
            <option value="Service quality (UFC)">Service quality (UFC)</option>
            <option value="No available staff (UFC)">No available staff (UFC)</option>
            <option value="No interest (Candidate)">No interest (Candidate)</option>
            <option value="Low revenus expected (Candidate)">Low revenus expected (Candidate)</option>
            <option value="Other">Other</option>
      </select>

      <div style="margin-left:300px; margin-top:-60px;">
        <label>Archive Date</label>
        <input type="date" 
              style="width:220px"
              class="form-control" 
              name="archiveDate" 
              (change)="dateArchiveChanged($event.target.valueAsDate)"
              [ngModel]="customer.archiveDate | date:'yyyy-MM-dd'" 
              #archiveDate="ngModel" 
              title="Month/Day/Year"
        />
      </div>

    </div>

    <br/>

    <div *ngIf="customer">

      <div class="alert alert-warning" *ngIf="customer._id && deleteMessageEnabled">
         Delete Customer?&nbsp;&nbsp;
         <button class="btn btn-danger" (click)="delete($event)">Yes</button>&nbsp;&nbsp;
         <button class="btn btn-default" (click)="deleteMessageEnabled = false">No</button>
      </div>
      
      <button class="btn btn-danger" *ngIf="customer._id && !deleteMessageEnabled" (click)="deleteMessageEnabled = true">Delete</button>&nbsp;&nbsp;

      <div class="pull-right">
        <button class="btn btn-default" (click)="cancel()">Cancel</button>&nbsp;&nbsp;
        <button *ngIf="!deleteMessageEnabled" type="submit" class="btn btn-success" [disabled]="!customerForm.valid">{{ operationText }}</button>
      </div>
      
    </div>

    <br/><br/>

    <div class="alert alert-danger" *ngIf="errorMessage != null">{{ errorMessage }}</div>

  </form>
</div>